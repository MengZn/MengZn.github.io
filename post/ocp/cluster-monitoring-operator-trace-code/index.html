<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>從source code看openshift怎麼做監控-(資源建立篇) - Meng Ze&#39;s Blog</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="從source code看openshift怎麼做監控-(資源建立篇)" />
<meta property="og:description" content="
     
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.jjmengze.website/post/ocp/cluster-monitoring-operator-trace-code/" />
<meta property="article:published_time" content="2020-07-22T12:06:29+08:00" />
<meta property="article:modified_time" content="2020-07-22T12:06:29+08:00" />

	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Meng Ze&#39;s Blog" rel="home">
				<div class="logo__title">Meng Ze&#39;s Blog</div>
				<div class="logo__tagline">Record my learning process</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About Me</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">從source code看openshift怎麼做監控-(資源建立篇)</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2020-07-22T12:06:29&#43;08:00">2020-07-22</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/openshift/" rel="category">openshift</a>, <a class="meta__link" href="/categories/go/" rel="category">go</a>
	</span>
</div></div>
		</header>
<div class="post__toc toc">
	<div class="toc__title">Page content</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#元件狀態監控">元件狀態監控</a></li>
    <li><a href="#從建立一個operator物件開始">從建立一個Operator物件開始</a></li>
    <li><a href="#不停的循環吧">不停的循環吧！</a></li>
    <li><a href="#結語">結語</a></li>
  </ul>
</nav>
	</div>
</div>
<div class="content post__content clearfix">
			<figure>
    <img src="/images/theme/ocp.png"/> 
</figure>

<p>所有 source code 都可以從 github 上找到<a href="https://github.com/openshift/cluster-monitoring-operator">cluster-monitoring-operator</a>，本次 trace code 的版本為 <code>release-4.5</code> ， 內容如有錯誤或是不正確的地方希望您可提出與我一起討論與學習。</p>
<h2 id="元件狀態監控">元件狀態監控</h2>
<p>可以到 <code>/go/src/cluster-monitoring-operator/manifests</code> 觀察 <code>cluster-monitoring-operator</code> 有哪些設定檔。</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">tree /go/src/cluster-monitoring-operator/manifests
├── 0000_50_cluster_monitoring_operator_01-namespace.yaml
├── 0000_50_cluster_monitoring_operator_02-role.yaml
├── 0000_50_cluster_monitoring_operator_03-role-binding.yaml
├── 0000_50_cluster_monitoring_operator_04-config.yaml
├── 0000_50_cluster_monitoring_operator_05-deployment.yaml
├── 0000_50_cluster_monitoring_operator_06-clusteroperator.yaml
├── 0000_90_cluster_monitoring_operator_00-operatorgroup.yaml
├── 0000_90_cluster_monitoring_operator_01-dashboards.yaml
└── image-references
</code></pre></div><p>目前的思考方向是從部署一個 <code>cluster-monitoring-operator</code> 總共部署了哪些東西，再來思考部署了這些東西要做什麼。</p>
<p>從上面一一看下來總共部署了。</p>
<ol>
<li>namespace</li>
<li>role</li>
<li>role binding</li>
<li>config
(telemetry-config，不是很確定要用來做什麼的，先挖了坑準備跳進去)</li>
<li>deployment
(cluster-monitoring-operator本體)</li>
<li>clusteroperator
(屬於config.openshift.io/v1的物件，不是很確定要用來做什麼的，先挖了坑準備跳進去)</li>
<li>OperatorGroup
(是Operator Lifecycle Manager，有機會再來討論這一塊、目前不用管他)</li>
<li>config
(設定grafana-dashboard的UI)</li>
</ol>
<p>看到這裡大致上能夠猜測出 <code>cluster-monitoring-operator</code> 就只有單一個服務。了解了部署之後我們可以往 spurce code 的地方探討。</p>
<h2 id="從建立一個operator物件開始">從建立一個Operator物件開始</h2>
<p>先從這個位置上開始說起 <code>/go/src/cluster-monitoring-operator/pkg/operator</code> 。可以從 New function 看到建立了一個 Operator struct ，一些 code 不影響接下來要追蹤的邏輯我就不放上來佔版面了，有需要的朋友在麻煩自行上 Github 去搜尋。</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#fb660a;font-weight:bold">func</span> <span style="color:#ff0086;font-weight:bold">New</span>(config *rest.Config, version, namespace, namespaceUserWorkload, namespaceSelector, configMapName <span style="color:#cdcaa9;font-weight:bold">string</span>, remoteWrite <span style="color:#cdcaa9;font-weight:bold">bool</span>, images <span style="color:#fb660a;font-weight:bold">map</span>[<span style="color:#cdcaa9;font-weight:bold">string</span>]<span style="color:#cdcaa9;font-weight:bold">string</span>, telemetryMatches []<span style="color:#cdcaa9;font-weight:bold">string</span>) (*Operator, <span style="color:#cdcaa9;font-weight:bold">error</span>) {
	c, err := client.<span style="color:#ff0086;font-weight:bold">New</span>(config, version, namespace, namespaceSelector)
	<span style="color:#fb660a;font-weight:bold">if</span> err != <span style="color:#fb660a;font-weight:bold">nil</span> {
		<span style="color:#fb660a;font-weight:bold">return</span> <span style="color:#fb660a;font-weight:bold">nil</span>, err
	}

	o := &amp;Operator{
		images:                images,
		telemetryMatches:      telemetryMatches,
		configMapName:         configMapName,
		remoteWrite:           remoteWrite,
		namespace:             namespace,
		namespaceUserWorkload: namespaceUserWorkload,
		client:                c,
		queue:                 workqueue.<span style="color:#ff0086;font-weight:bold">NewNamedRateLimitingQueue</span>(workqueue.<span style="color:#ff0086;font-weight:bold">DefaultControllerRateLimiter</span>(), <span style="color:#0086d2">&#34;cluster-monitoring&#34;</span>),
	}

	o.secretInf = cache.<span style="color:#ff0086;font-weight:bold">NewSharedIndexInformer</span>(
		o.client.<span style="color:#ff0086;font-weight:bold">SecretListWatchForNamespace</span>(namespace), &amp;v1.Secret{}, resyncPeriod, cache.Indexers{},
	)
	o.secretInf.<span style="color:#ff0086;font-weight:bold">AddEventHandler</span>(cache.ResourceEventHandlerFuncs{
		AddFunc:    o.handleEvent,
		UpdateFunc: <span style="color:#fb660a;font-weight:bold">func</span>(_, newObj <span style="color:#fb660a;font-weight:bold">interface</span>{}) { o.<span style="color:#ff0086;font-weight:bold">handleEvent</span>(newObj) },
		DeleteFunc: o.handleEvent,
	})

	o.cmapInf = cache.<span style="color:#ff0086;font-weight:bold">NewSharedIndexInformer</span>(
		o.client.<span style="color:#ff0086;font-weight:bold">ConfigMapListWatch</span>(), &amp;v1.ConfigMap{}, resyncPeriod, cache.Indexers{},
	)
	o.cmapInf.<span style="color:#ff0086;font-weight:bold">AddEventHandler</span>(cache.ResourceEventHandlerFuncs{
		AddFunc:    o.handleEvent,
		UpdateFunc: <span style="color:#fb660a;font-weight:bold">func</span>(_, newObj <span style="color:#fb660a;font-weight:bold">interface</span>{}) { o.<span style="color:#ff0086;font-weight:bold">handleEvent</span>(newObj) },
		DeleteFunc: o.handleEvent,
	})

	o.kubeSystemCmapInf = cache.<span style="color:#ff0086;font-weight:bold">NewSharedIndexInformer</span>(
		o.client.<span style="color:#ff0086;font-weight:bold">ConfigMapListWatchForNamespace</span>(<span style="color:#0086d2">&#34;kube-system&#34;</span>),
		&amp;v1.ConfigMap{}, resyncPeriod, cache.Indexers{},
	)
	o.kubeSystemCmapInf.<span style="color:#ff0086;font-weight:bold">AddEventHandler</span>(cache.ResourceEventHandlerFuncs{
		UpdateFunc: <span style="color:#fb660a;font-weight:bold">func</span>(_, newObj <span style="color:#fb660a;font-weight:bold">interface</span>{}) { o.<span style="color:#ff0086;font-weight:bold">handleEvent</span>(newObj) },
	})

	o.openshiftConfigManagedCmapInf = cache.<span style="color:#ff0086;font-weight:bold">NewSharedIndexInformer</span>(
		o.client.<span style="color:#ff0086;font-weight:bold">ConfigMapListWatchForNamespace</span>(<span style="color:#0086d2">&#34;openshift-config-managed&#34;</span>),
		&amp;v1.ConfigMap{}, resyncPeriod, cache.Indexers{},
	)
	o.openshiftConfigManagedCmapInf.<span style="color:#ff0086;font-weight:bold">AddEventHandler</span>(cache.ResourceEventHandlerFuncs{
		UpdateFunc: <span style="color:#fb660a;font-weight:bold">func</span>(_, newObj <span style="color:#fb660a;font-weight:bold">interface</span>{}) { o.<span style="color:#ff0086;font-weight:bold">handleEvent</span>(newObj) },
	})

	o.openshiftConfigCmapInf = cache.<span style="color:#ff0086;font-weight:bold">NewSharedIndexInformer</span>(
		o.client.<span style="color:#ff0086;font-weight:bold">ConfigMapListWatchForNamespace</span>(<span style="color:#0086d2">&#34;openshift-config&#34;</span>),
		&amp;v1.ConfigMap{}, resyncPeriod, cache.Indexers{},
	)
	o.openshiftConfigCmapInf.<span style="color:#ff0086;font-weight:bold">AddEventHandler</span>(cache.ResourceEventHandlerFuncs{
		UpdateFunc: <span style="color:#fb660a;font-weight:bold">func</span>(_, newObj <span style="color:#fb660a;font-weight:bold">interface</span>{}) { o.<span style="color:#ff0086;font-weight:bold">handleEvent</span>(newObj) },
	})

	<span style="color:#fb660a;font-weight:bold">return</span> o, <span style="color:#fb660a;font-weight:bold">nil</span>
}
</code></pre></div><p>從上述的 <code>source code</code> 可以觀察到 <code>cluster-monitoring-oper</code> 建立了五個<code>SharedIndexInformer</code>，後續會使用到這些資源做進一步元件的觀察與監控。</p>
<ul>
<li>ConfigMapListWatchForNamespace
<ul>
<li>openshift-config-managed</li>
<li>openshift-config</li>
<li>kube-system</li>
</ul>
</li>
<li>SecretListWatchForNamespace
<ul>
<li>openshift-monitoring</li>
</ul>
</li>
<li>ConfigMapListWatch
<ul>
<li>openshift-monitoring</li>
</ul>
</li>
</ul>
<p>:::danger
不過後續發現下面兩個informer沒有執行，有點奇怪。
<code>openshiftConfigManagedCmapInf </code>
<code>openshiftConfigCmapInf</code>
:::</p>
<p>除了建立這些資元的 <code>SharedIndexInformer</code> 外，當這些資源的變化還會傳入 <code>handleEvent</code> 丟入 <code>RateLimitingQueue</code> 進行後續的處理。</p>
<p><code>Operator struct</code>基本上設定了一些參數，除了上面提到的五個這些 <code>SharedIndexInformer</code> 外，其他的參數大多數都是從 deployment yaml裡面指定過來的。</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-namespace=openshift-monitoring&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-namespace-user-workload=openshift-user-workload-monitoring&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-configmap=cluster-monitoring-config&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=prometheus-operator=quay.io/openshift/origin-prometheus-operator:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=prometheus-config-reloader=quay.io/openshift/origin-prometheus-config-reloader:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=configmap-reloader=quay.io/openshift/origin-configmap-reloader:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=prometheus=quay.io/openshift/origin-prometheus:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=alertmanager=quay.io/openshift/origin-prometheus-alertmanager:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=grafana=quay.io/openshift/origin-grafana:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=oauth-proxy=quay.io/openshift/origin-oauth-proxy:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=node-exporter=quay.io/openshift/origin-prometheus-node-exporter:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=kube-state-metrics=quay.io/openshift/origin-kube-state-metrics:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=openshift-state-metrics=quay.io/openshift/origin-openshift-state-metrics:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=kube-rbac-proxy=quay.io/openshift/origin-kube-rbac-proxy:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=telemeter-client=quay.io/openshift/origin-telemeter:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=prom-label-proxy=quay.io/openshift/origin-prom-label-proxy:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=k8s-prometheus-adapter=quay.io/openshift/origin-k8s-prometheus-adapter:latest&#34;</span><span style="color:#888">
</span><span style="color:#888">        </span>- <span style="color:#0086d2">&#34;-images=thanos=quay.io/openshift/origin-thanos:latest&#34;</span><span style="color:#888">
</span></code></pre></div><h2 id="不停的循環吧">不停的循環吧！</h2>
<p>在進到 main function 的 <code>wg.Go(func() error { return o.Run(ctx.Done()) })</code> 之前的 code 對邏輯來說都沒有太大的影響，所以直接跳到 Run 來看看 <code>cluster-monitoring-oper</code> 在這裡做了哪些好事！</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;background-color:#0f140f;font-style:italic">// Run the controller.
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span><span style="color:#fb660a;font-weight:bold">func</span> (o *Operator) <span style="color:#ff0086;font-weight:bold">Run</span>(stopc &lt;-<span style="color:#fb660a;font-weight:bold">chan</span> <span style="color:#fb660a;font-weight:bold">struct</span>{}) <span style="color:#cdcaa9;font-weight:bold">error</span> {
	...

	<span style="color:#fb660a;font-weight:bold">go</span> o.cmapInf.<span style="color:#ff0086;font-weight:bold">Run</span>(stopc)
	<span style="color:#fb660a;font-weight:bold">go</span> o.secretInf.<span style="color:#ff0086;font-weight:bold">Run</span>(stopc)
	<span style="color:#fb660a;font-weight:bold">go</span> o.kubeSystemCmapInf.<span style="color:#ff0086;font-weight:bold">Run</span>(stopc)

	klog.<span style="color:#ff0086;font-weight:bold">V</span>(<span style="color:#0086f7;font-weight:bold">4</span>).<span style="color:#ff0086;font-weight:bold">Info</span>(<span style="color:#0086d2">&#34;Waiting for initial cache sync.&#34;</span>)
	ok := cache.<span style="color:#ff0086;font-weight:bold">WaitForCacheSync</span>(stopc, o.cmapInf.HasSynced, o.kubeSystemCmapInf.HasSynced)
	<span style="color:#fb660a;font-weight:bold">if</span> !ok {
		<span style="color:#fb660a;font-weight:bold">return</span> errors.<span style="color:#ff0086;font-weight:bold">New</span>(<span style="color:#0086d2">&#34;failed to sync informers&#34;</span>)
	}
	klog.<span style="color:#ff0086;font-weight:bold">V</span>(<span style="color:#0086f7;font-weight:bold">4</span>).<span style="color:#ff0086;font-weight:bold">Info</span>(<span style="color:#0086d2">&#34;Initial cache sync done.&#34;</span>)

	<span style="color:#fb660a;font-weight:bold">go</span> o.<span style="color:#ff0086;font-weight:bold">worker</span>()

	ticker := time.<span style="color:#ff0086;font-weight:bold">NewTicker</span>(<span style="color:#0086f7;font-weight:bold">5</span> * time.Minute)
	<span style="color:#fb660a;font-weight:bold">defer</span> ticker.<span style="color:#ff0086;font-weight:bold">Stop</span>()

	key := o.namespace + <span style="color:#0086d2">&#34;/&#34;</span> + o.configMapName
	_, exists, _ := o.cmapInf.<span style="color:#ff0086;font-weight:bold">GetStore</span>().<span style="color:#ff0086;font-weight:bold">GetByKey</span>(key)
	<span style="color:#fb660a;font-weight:bold">if</span> !exists {
		klog.<span style="color:#ff0086;font-weight:bold">Info</span>(<span style="color:#0086d2">&#34;ConfigMap to configure stack does not exist. Reconciling with default config every 5 minutes.&#34;</span>)
		o.<span style="color:#ff0086;font-weight:bold">enqueue</span>(key)
	}

	<span style="color:#fb660a;font-weight:bold">for</span> {
		<span style="color:#fb660a;font-weight:bold">select</span> {
		<span style="color:#fb660a;font-weight:bold">case</span> &lt;-stopc:
			<span style="color:#fb660a;font-weight:bold">return</span> <span style="color:#fb660a;font-weight:bold">nil</span>
		<span style="color:#fb660a;font-weight:bold">case</span> &lt;-ticker.C:
			_, exists, _ := o.cmapInf.<span style="color:#ff0086;font-weight:bold">GetStore</span>().<span style="color:#ff0086;font-weight:bold">GetByKey</span>(key)
			<span style="color:#fb660a;font-weight:bold">if</span> !exists {
				klog.<span style="color:#ff0086;font-weight:bold">Info</span>(<span style="color:#0086d2">&#34;ConfigMap to configure stack does not exist. Reconciling with default config every 5 minutes.&#34;</span>)
				o.<span style="color:#ff0086;font-weight:bold">enqueue</span>(key)
			}
		}
	}
}
</code></pre></div><p>從上面的 code 看下來在 Run 這個階段啟動了 三個 informer ，分別是<code>ConfigMapInformer</code>、<code>kubeSystemConfigmapInformer</code>、<code>secretInformer</code>。這邊就對應到上面提到的在建立 <code>Operator</code> 的時候新增了五個informer但在 Run 這個階段只有啟動三個，目前我還不知道為什麼要這樣設計，如果有朋友知道為什麼的話歡迎告訴我，感謝！</p>
<p>其中我認為最重要的一段，關於這一段會在下一個篇章做一個流程的分析。</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#fb660a;font-weight:bold">go</span> o.<span style="color:#ff0086;font-weight:bold">worker</span>()
</code></pre></div><p>剩下的部分相對來說比較簡單一點，會透過<code>key := o.namespace + &quot;/&quot; + o.configMapName</code>的結果，去ConfigMapInformer搜尋有沒有符合這個名字的configmap物件。</p>
<p>如果沒有這個物件的話就把事件丟到<code>RateLimitingQueue</code> 進行後續的追蹤處理。</p>
<p>最後是一個無窮迴圈等待收到結束的訊號，以及一個五分鐘定時查看<code>ConfigMapInformer</code>搜尋有沒有符合這個<code>key := o.namespace + &quot;/&quot; + o.configMapName</code>名字的configmap物件。</p>
<p>如果沒有這個物件的話就把事件丟到 <code>RateLimitingQueue</code> 進行後續的追蹤處理。</p>
<h2 id="結語">結語</h2>
<p>到目前為止，把 <code>cluster-monitoring-oper</code> 大方向的邏輯順過一次，大致上跟其他Kubernetes controller 一樣建立 <code>SharedIndexInformer</code> ，監聽變化事件放到<code>RateLimitingQueue</code> 進行後續的追蹤處理，會續會把核心<code>go o.worker()</code>這邊進一步分析。</p>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/openshift/" rel="tag">openshift</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/go/" rel="tag">go</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Meng Ze avatar" src="/img/apple.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Meng Ze</span>
	</div>
	<div class="authorbox__description">
		Meng 專注於雲端世界的耕耘者，喜歡潛水健身等休閒運動。
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/post/ocp/cluster-monitoring-operator/" rel="prev">
			<span class="post-nav__caption">«&thinsp;Previous</span>
			<p class="post-nav__post-title">Cluster Monitoring Operator</p>
		</a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/post/kubernetes/kubernetes-scheduler/" rel="next">
			<span class="post-nav__caption">Next&thinsp;»</span>
			<p class="post-nav__post-title">Kubernetes Scheduler 探討 source code 前的準備</p>
		</a>
	</div>
</nav>

<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "meng-ze" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 Meng Ze&#39;s Blog.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>